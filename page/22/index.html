
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Nome do Jogo</title>
  <meta name="author" content="Carlos Brando">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://nomedojogo.com/page/22/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds2.feedburner.com/NomeDoJogo" rel="alternate" title="Nome do Jogo" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1249636-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Nome do Jogo</a></h1>
  
    <h2>por Carlos Brando</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds2.feedburner.com/NomeDoJogo" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:nomedojogo.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Arquivo</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/17/rails-summit-latin-america/">Rails Summit Latin America</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-17 00:00:00 -0300" pubdate  updated >17 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p><img class="alignnone" src="http://farm4.static.flickr.com/3283/2946803135_912c34d265.jpg?v=0" alt="" width="500" height="332" /></p>

<p>Ainda não estou em condições de escrever nada sobre o <strong>Rails Summit</strong>&#8230; ainda estou me recuperando!</p>

<p>Só posso garantir que foi o melhor evento de desenvolvimento que já tivemos no Brasil, sem sombra de dúvidas. Aguardem que em breve teremos um Rails Podcast especial contando tudo sobre os bastidores do evento!</p>

<p>Enquanto isto, fique com algumas fotos: <a href="http://flickr.com/photos/surgeworks/">clique aqui</a></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/10/17/rails-summit-latin-america/">Ler mais &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/15/video-do-railsenvy-no-rails-summit/">Vídeo do RailsEnvy no Rails Summit</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-15 00:00:00 -0300" pubdate  updated >15 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Acabou de ser transmitido no <strong>Rails Summit Latin America</strong> um vídeo que <span>Gregg Pollack e Jason Seifer</span> do <a href="http://www.railsenvy.com/">RailsEnvy</a> fizeram especialmente para o evento. Para aqueles que não estão aqui, ou caso você queira rever o vídeo:</p>

<object width="500" height="377">   <param name="allowfullscreen" value="true" />   <param name="allowscriptaccess" value="always" />   <param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id=1974744&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" /> <embed src="http://vimeo.com/moogaloop.swf?clip_id=1974744&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="500" height="377"></embed></object>


<br /><a href="http://vimeo.com/1974744?pg=embed&amp;sec=1974744">Rails Summit - RailsEnvy</a> from <a href="http://vimeo.com/user417502?pg=embed&amp;sec=1974744">Carlos Brando</a> on <a href="http://vimeo.com?pg=embed&amp;sec=1974744">Vimeo</a>.

</div>
  <footer>
    <a rel="full-article" href="/2008/10/15/video-do-railsenvy-no-rails-summit/">Ler mais &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/09/rails-summit-meu-emprego-foi-para-os-eua/">Rails Summit: Meu emprego foi para os EUA</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-09 00:00:00 -0300" pubdate  updated > 9 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p style="text-align: center;"><strong>&#8220;MY JOB WENT TO USA (And All I Got Was This Lousy Presentation)&#8221;</strong></p>


<p>Este é o tema da palestra que estarei realizado no <strong><a href="http://www.locaweb.com.br/railssummit/">Rails Summit Latin America</a></strong>, no dia 15 de outubro às 15:30. É uma brincadeira com o título do famoso livro de <a href="http://chadfowler.com/">Chad Fowler</a>, que também estará presente no evento.</p>

<p><img class="alignright size-full wp-image-1536" style="border: 5px solid white;" title="myjob1" src="http://old.nomedojogo.com/wp-content/uploads/2008/10/myjob1.jpg" alt="" width="148" height="228" />A palestra será dividida em duas partes. A primeira será uma apresentação baseada nos atos, impensados ou não, que me levaram a conseguir meu emprego na <strong><a href="http://surgeworks.com/">Surgeworks, Inc.</a></strong>, uma consultoria americana. Relembrando o caminho que percorri e analisando dicas do livro que da nome a esta palestra, vou contar como consegui este emprego mesmo sem nenhuma experiência profissional com Rails na época.</p>

<p>A segunda parte desta apresentação será uma sessão de perguntas e respostas com toda a equipe de <a href="http://surgeworks.com/about-us/">desenvolvedores brasileiros</a> da Surgeworks. Também contará com a participação de <a href="http://youngbloods.org/">Carl Youngblood</a>, que está do outro lado do negócio, sendo ele um contratador.</p>

<p>Qualquer um que tenha interesse em trabalhar para uma empresa de fora do Brasil, presencial ou remotamente, não pode perder esta apresentação. Esta é a chance de tirar todas as suas dúvidas sobre este tipo de trabalho.</p>

<hr />Você já tem uma pergunta ou dúvida em mente? Então me ajude a preparar esta palestra deixando sua dúvida nos <a href="http://www.nomedojogo.com/2008/10/09/rails-summit-meu-emprego-foi-para-os-eua/#comments">comentários</a>. Também não deixe de participar com suas perguntas no dia do evento.

</div>
  <footer>
    <a rel="full-article" href="/2008/10/09/rails-summit-meu-emprego-foi-para-os-eua/">Ler mais &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/08/rails-podcast-brasil-episodio-33/">Rails Podcast Brasil - Episódio 33</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-08 00:00:00 -0300" pubdate  updated > 8 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Estamos a uma semana do <a href="http://www.locaweb.com.br/railssummit/">Rails Summit Latin America</a>! E você já está no clima?</p>

<p>No podcast desta semana falamos sobre o <strong>Ruby In Steel</strong>, um plugin que torna o Visual Studio uma ferramenta poderosa para desenvolvedores Ruby. Também falamos sobre o <strong>Tog</strong>, uma coleção de plugins para redes sociais, muito interessante. Outros assuntos abordados: SEO, PassiveRecord, RubyGems, Git e JRuby.</p>

<h2>Neste episódio</h2>


<ul>
    <li><a href="http://www.akitaonrails.com/2008/10/6/rails-summit-semana-que-vem">Rails Summit: Semana que vem! (fotos)</a></li>
    <li><a href="http://www.rubyinside.com/ruby-in-steel-pe-free-visual-studio-based-ruby-and-rails-ide-for-windows-1228.html">Ruby In Steel PE: Free, Visual Studio-based Ruby and Rails IDE for Windows</a></li>
    <li><a href="http://www.akitaonrails.com/2008/10/2/entendendo-git-e-instalando-gitorious-git-via-web">Entendendo Git e Instalando Gitorious (Git via Web)</a></li>
    <li><a href="http://www.ruby-forum.com/topic/167363">Ruby 1.9.0-5 was released</a></li>
    <li><a href="http://blog.zenspider.com/2008/10/rubygems-howto-preventing-cata.html">RubyGems How-To: Preventing Catastrophe</a></li>
    <li><a href="http://www.railsinside.com/plugins/115-tog-rails-social-networking.html">Tog: A New Way To Social Network-ify Your Rails Apps</a></li>
    <li><a href="http://www.artofmission.net/articles/2008/10/2/passiverecord">PassiveRecord</a></li>
    <li><a href="http://blog.phusion.nl/2008/10/03/47/">default<em>value</em>for Rails plugin: declaratively define default values for ActiveRecord models</a></li>
    <li><a href="http://flaviogranero.com/2008/10/06/seo-on-rails-titulos-meta-tags/">SEO on Rails: Títulos e Meta-Tags</a></li>
    <li><a href="http://oreilly.com/catalog/9780596519803/">JRuby Cookbook</a></li>
    <li><a href="http://blog.grayproductions.net/articles/working_with_multiline_strings">Working With Multiline Strings</a></li>
    <li><a href="http://macournoyer.wordpress.com/2008/09/30/thin-10/">Thin 1.0</a></li>
    <li><a href="http://www.dcmanges.com/blog/rails-performance-tuning-workflow">Rails: Performance Tuning Workflow</a></li>
</ul>


<p><strong>Download</strong>: <a href="http://download.podcast.rubyonrails.pro.br/RailsPodcastBrasil_033.mp3">Episódio #33</a>
iTunes: <a href="http://podcast.rubyonrails.pro.br/rss">http://podcast.rubyonrails.pro.br/rss</a>
Episódios anteriores: <a href="http://podcast.rubyonrails.pro.br">http://podcast.rubyonrails.pro.br</a></p>
</div>
  <footer>
    <a rel="full-article" href="/2008/10/08/rails-podcast-brasil-episodio-33/">Ler mais &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/07/rails-21-que-hay-de-nuevo-1000-downloads/">&#8220;Rails 2.1 - Que hay de nuevo?&#8221; - 1000 downloads</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-07 00:00:00 -0300" pubdate  updated > 7 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p><a href="http://gastonramos.wordpress.com/">Gaston Ramos,</a> o responsável pela tradução do meu livro para <a href="http://www.nomedojogo.com/2008/08/29/el-libro-%E2%80%9Crails-21-%C2%BFque-hay-de-nuevo%E2%80%9D-traducido-al-espanol/">espanhol</a> acabou de me avisar que hoje foi feito o milésimo download da versão em espanhol do livro. Fico muito feliz de ver que o trabalho de criar o livro valeu a pena.</p>

<p>A versão em <a href="http://www.nomedojogo.com/2008/06/15/ruby-on-rails-21-whats-new-second-edition/">inglês</a>, teve à partir do meu site mais de 30.000 downloads e a versão em <a href="http://www.nomedojogo.com/2008/06/06/o-primeiro-livro-sobre-rails-21-e-brasileiro/">português</a> tem neste momento 3.568 downloads registrados.</p>

<p>Parabéns Gaston e todos os envolvidos no projeto de tradução! E obrigado a todos os que colaboraram com a tradução do livro para inglês e especialmente ao <a href="http://www.improveit.com.br/empresa/tapajos">Marcos Tapajós</a> e ao <a href="http://brunomiranda.com/blog">Bruno Miranda</a> que ajudaram na montagem e revisão do livro.</p>
</div>
  <footer>
    <a rel="full-article" href="/2008/10/07/rails-21-que-hay-de-nuevo-1000-downloads/">Ler mais &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/07/edge-rails-mais-um-finder-dinamico-find_last_by/">Edge Rails: Mais um finder dinâmico</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-07 00:00:00 -0300" pubdate  updated > 7 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Aumentando o número de finders dinâmicos do <strong>ActiveRecord</strong>, agora temos o <strong>find_last_by</strong>. Já tinhamos os famosos <strong>find_by</strong> e o <strong>find_all_by</strong>.</p>

<p>Além de simplificar, ficou muito mais elegante recuperar o último comentário feito por um usuário, por exemplo. Veja:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails"><span class="support support_class support_class_ruby">Comment</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>find_last_by_author<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>Carlos Brando<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span></span></pre>


<hr /><em>Este artigo pertence a série “Edge Rails”. Todos os exemplos dados aqui funcionarão somente no <strong>Ruby on Rails 2.2 ou superior</strong>. A intenção desta série é preparar antecipadamente os programadores para as próximas versões do framework.</em>

</div>
  <footer>
    <a rel="full-article" href="/2008/10/07/edge-rails-mais-um-finder-dinamico-find_last_by/">Ler mais &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/06/edge-rails-benchmarking-reports-em-milisegundos/">Edge Rails: Benchmarking reports em milisegundos</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-06 00:00:00 -0300" pubdate  updated > 6 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Todas as mensagens de log que continham uma indicação do tempo que determinado processo levou para ser executado, foram alteradas para exibir o tempo em milisegundos.</p>

<p>Por exemplo, a mensagem:</p>

<pre class="textmate-source"><span class="text text_plain"><span class="meta meta_paragraph meta_paragraph_text">Completed in 0.10000 (4 reqs/sec) | Rendering: 0.04000 (40%) | DB: 0.00400 (4%) | 200 OK [<span class="markup markup_underline markup_underline_link markup_underline_link_text">http://example.com</span>]</span></span></pre>


<p>Agora será exibida da seguinte forma:</p>

<pre class="textmate-source"><span class="text text_plain"><span class="meta meta_paragraph meta_paragraph_text">Completed in 100ms (View: 40, DB: 4) | 200 OK [<span class="markup markup_underline markup_underline_link markup_underline_link_text">http://example.com</span>]</span></span></pre>


<hr /><em>Este artigo pertence a série “Edge Rails”. Todos os exemplos dados aqui funcionarão somente no <strong>Ruby on Rails 2.2 ou superior</strong>. A intenção desta série é preparar antecipadamente os programadores para as próximas versões do framework.</em>

</div>
  <footer>
    <a rel="full-article" href="/2008/10/06/edge-rails-benchmarking-reports-em-milisegundos/">Ler mais &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/03/edge-rails-novo-metodo-each_with_object/">Edge Rails: Novo método each_with_object</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-03 00:00:00 -0300" pubdate  updated > 3 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>O método <strong>each_with_object</strong> do Ruby 1.9 foi adicionado ao Rails, caso você ainda não esteja usando a nova versão do Ruby. Este método é bem interessante, pois ele funciona como o conhecido método <strong>each</strong>, com um pequeno diferencial. Cada iteração além de receber um elemento da coleção, recebe também um objeto que chamamos de <strong>memo</strong>.</p>

<p>Por exemplo, vamos dizer que eu pretenda preencher um hash com valores de uma coleção:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails"><span class="string string_quoted string_quoted_other string_quoted_other_literal string_quoted_other_literal_lower string_quoted_other_literal_lower_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">%w(</span>first second third<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">)</span></span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>each_with_object<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{}</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="keyword keyword_control keyword_control_start-block keyword_control_start-block_ruby">do </span><span class="punctuation punctuation_separator punctuation_separator_variable punctuation_separator_variable_ruby">|</span><span class="variable variable_other variable_other_block variable_other_block_ruby">str</span><span class="punctuation punctuation_separator punctuation_separator_variable punctuation_separator_variable_ruby">,</span> <span class="variable variable_other variable_other_block variable_other_block_ruby">hash</span><span class="punctuation punctuation_separator punctuation_separator_variable punctuation_separator_variable_ruby">|</span>
  hash<span class="punctuation punctuation_section punctuation_section_array punctuation_section_array_ruby">[</span>str<span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>to_sym<span class="punctuation punctuation_section punctuation_section_array punctuation_section_array_ruby">]</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_ruby">=</span> str
<span class="keyword keyword_control keyword_control_ruby">end</span>
<span class="comment comment_line comment_line_number-sign comment_line_number-sign_ruby"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_ruby">#</span> =&gt; {:second=&gt;"second", :first=&gt;"first", :third=&gt;"third"}</span></span></pre>


<p>Note que no exemplo acima o memo é um hash vazio (<strong>{}</strong>). Dentro do bloco eu preencho este hash com os itens da minha coleção.</p>

<p>Apenas um alerta: Não podemos usar objetos imutáveis como memo, tais como números, true e false. No exemplo abaixo o retorno sempre será 1, já que o número um não pode ser alterado:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails"><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_numeric constant_numeric_ruby">1</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">..</span><span class="constant constant_numeric constant_numeric_ruby">5</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>each_with_object<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_numeric constant_numeric_ruby">1</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span><span class="punctuation punctuation_separator punctuation_separator_variable punctuation_separator_variable_ruby">|</span><span class="variable variable_other variable_other_block variable_other_block_ruby">value</span><span class="punctuation punctuation_separator punctuation_separator_variable punctuation_separator_variable_ruby">,</span> <span class="variable variable_other variable_other_block variable_other_block_ruby">memo</span><span class="punctuation punctuation_separator punctuation_separator_variable punctuation_separator_variable_ruby">|</span> memo <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_augmented keyword_operator_assignment_augmented_ruby">*=</span> value <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span> <span class="comment comment_line comment_line_number-sign comment_line_number-sign_ruby"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_ruby">#</span> =&gt; 1</span></span></pre>


<hr /><em>Este artigo pertence a série “Edge Rails”. Todos os exemplos dados aqui funcionarão somente no <strong>Ruby on Rails 2.2 ou superior</strong>. A intenção desta série é preparar antecipadamente os programadores para as próximas versões do framework.</em>

</div>
  <footer>
    <a rel="full-article" href="/2008/10/03/edge-rails-novo-metodo-each_with_object/">Ler mais &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/02/edge-rails-melhorando-a-performance-nos-metodos-association_ids/">Edge Rails: Melhorando a performance nos métodos association_ids</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-02 00:00:00 -0300" pubdate  updated > 2 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Se você tiver dois modelos: <strong>Post</strong> e <strong>Comment</strong>. Onde <strong>Post</strong> tem muitos (<strong>has_many</strong>) comentários. Se você executar:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails"><span class="support support_class support_class_ruby">Post</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>first<span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>comment_ids</span></pre>


<p>O Rails usará a seguinte query para recuperar os ids:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails"><span class="variable variable_other variable_other_constant variable_other_constant_ruby">SELECT</span> <span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_ruby">*</span> <span class="variable variable_other variable_other_constant variable_other_constant_ruby">FROM</span> <span class="string string_interpolated string_interpolated_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">`</span>comments<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">`</span></span> <span class="variable variable_other variable_other_constant variable_other_constant_ruby">WHERE</span> <span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="string string_interpolated string_interpolated_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">`</span>comments<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">`</span></span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>post_id <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_ruby">=</span> <span class="constant constant_numeric constant_numeric_ruby">1</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span></span></pre>


<p>Mas neste caso, não precisamos dos objetos inteiros. A seguinte query seria mais do que suficiente para o funcionamento deste método, além de possuir uma performance melhor:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails"><span class="variable variable_other variable_other_constant variable_other_constant_ruby">SELECT</span> <span class="string string_interpolated string_interpolated_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">`</span>comments<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">`</span></span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>id <span class="variable variable_other variable_other_constant variable_other_constant_ruby">FROM</span> <span class="string string_interpolated string_interpolated_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">`</span>comments<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">`</span></span> <span class="variable variable_other variable_other_constant variable_other_constant_ruby">WHERE</span> <span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="string string_interpolated string_interpolated_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">`</span>comments<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">`</span></span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>post_id <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_ruby">=</span> <span class="constant constant_numeric constant_numeric_ruby">1</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span></span></pre>


<p>Tanto para associações <strong>has_many</strong>, como para associações <strong>has_many :through</strong> o código foi alterado para incluir esta melhora de performance a partir do Rails 2.2.</p>

<hr /><em>Este artigo pertence a série “Edge Rails”. Todos os exemplos dados aqui funcionarão somente no <strong>Ruby on Rails 2.2 ou superior</strong>. A intenção desta série é preparar antecipadamente os programadores para as próximas versões do framework.</em>

</div>
  <footer>
    <a rel="full-article" href="/2008/10/02/edge-rails-melhorando-a-performance-nos-metodos-association_ids/">Ler mais &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/01/shoulda-20/">Shoulda 2.0</a></h1>
    
    
      <p class="meta">




<time datetime="2008-10-01 00:00:00 -0300" pubdate  updated > 1 de Outubro de 2008</time>


</p>
    
  </header>


  <div class="entry-content"><p>Outro projeto open-source que também participo e gosto muito é o <strong>Shoulda</strong>. Já tentei <a href="http://www.nomedojogo.com/2008/08/05/porque-eu-defendo-o-shoulda/">explicar no passado</a> o motivo de gostar tanto deste projeto, mas acho que tem muito a ver com uma questão de puro gosto.</p>

<p>Pois bem, acabou de ser liberada a versão 2.0.2 do <strong>Shoulda</strong> e a principal novidade é que agora ele funciona 100% como um gem. Além disso, novas macros foram acrescentadas, bugs foram corrigidos e algumas funcionalidades foram removidas.</p>

<p>Para utilizar o Shoulda em seu projeto Rails 2.1+ a melhor forma é acrescentar o seguinte código no seu arquivo <strong>config/environment.rb</strong>:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails source_ruby_rails_shoulda"><span class="support support_class support_class_ruby">Rails</span><span class="punctuation punctuation_separator punctuation_separator_other punctuation_separator_other_ruby">::</span><span class="support support_class support_class_ruby">Initializer</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>run <span class="keyword keyword_control keyword_control_start-block keyword_control_start-block_ruby">do </span><span class="punctuation punctuation_separator punctuation_separator_variable punctuation_separator_variable_ruby">|</span><span class="variable variable_other variable_other_block variable_other_block_ruby">config</span><span class="punctuation punctuation_separator punctuation_separator_variable punctuation_separator_variable_ruby">|</span>
  config<span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>gem <span class="string string_quoted string_quoted_single string_quoted_single_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">'</span>thoughtbot-shoulda<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">'</span></span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>lib</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="string string_quoted string_quoted_single string_quoted_single_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">'</span>shoulda/rails<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">'</span></span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span>
    <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>source</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>http://gems.github.com<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span>
<span class="keyword keyword_control keyword_control_ruby">end</span></span></pre>


<p>Depois basta executar no terminal:</p>

<pre class="textmate-source"><span class="text text_html text_html_basic">rake gems:install
rake gems:unpack
</span></pre>


<p>Entre as novidades, tivemos melhorias em macros existentes que prometem agilizar ainda mais a criação de testes, tais como o acréscimo das opções <strong>:equals</strong> e <strong>:class</strong> na macro <strong>should_assign_to</strong>. Com estas novas implementações fica fácil testar se o objeto devolvido é do tipo desejado ou mesmo igual a um objeto especifico.</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails source_ruby_rails_shoulda"><span class="support support_shoulda support_shoulda_macro">should_assign_to</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>user</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>equals</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>@user<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>class</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="variable variable_other variable_other_constant variable_other_constant_ruby">User</span></span></pre>


<p>A macro <strong>should_have_one</strong> também recebeu a opção <strong>:dependent</strong>:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails source_ruby_rails_shoulda"><span class="support support_shoulda support_shoulda_macro">should_have_one</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>address</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>dependent</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>destroy</span></span></pre>


<p>Agora falando apenas de novidades, temos as novas macros <strong>should_change</strong>, <strong>should_not_change</strong>, <strong>should_filter_params</strong>, <strong>should_render_with_layout</strong>, <strong>should_render_without_layout</strong>, <strong>should_route</strong>, <strong>should_respond_with_content_type</strong>, <strong>should_return_from_session</strong> e o muito útil <strong>before_should</strong>.</p>

<p>Mais detalhes sobre o funcionamento de todas estas macros podem ser encontrados na <a href="http://dev.thoughtbot.com/shoulda/">documentação</a> do projeto.</p>

<p>Algo interessante que também foi acrescentado ao projeto é a carga automática de macros customizadas. Caso você deseje criar suas próprias macros, basta criar uma pasta <strong>RAILS_ROOT/test/shoulda_macros</strong> e jogar lá dentro os arquivos com estas macros.</p>

<p>Gems e plugins também podem se beneficiar dessa vantagem. Se em qualquer um deles houver uma pasta <strong>shoulda_macros</strong> na raiz, todos os arquivos dentro da pasta também serão carregados automaticamente.</p>

<p>A única controvérsia desta versão, foi a remoção do método <strong>should_be_restful</strong>. Na verdade ele chegou a ser removido por alguns dias, mas depois voltou com uma mensagem de alerta avisando que em breve ele será removido definitivamente. Isto se dá pelo fato de que este método faz muita coisa de forma automática e não permite uma fácil localização do ponto onde um erro ocorre.</p>

<p>Um outro projeto também foi iniciado em paralelo ao desenvolvimento do <strong>Shoulda</strong>. O <a href="http://github.com/seanhussey/woulda">Woulda</a> promete ser um repositório de macros e recursos que não cabem ao Shoulda, como macros especificas para testar alguns gems/plugins famosos.</p>

<p>Para quem está começando a brincar com o <strong>Shoulda</strong> segue uma lista de recursos interessantes:</p>

<ul>
    <li><a href="http://www.makemesimple.com/blog/2008/06/27/learncast1-bdd-leve-com-shoulda-testando-modelos-activerecord/">Screencast BDD leve com Shoulda - testando modelos ActiveRecord</a></li>
    <li><a href="http://jonysk.net/blog/2008/08/17/shoulda-x-rspec-cuidado-nas-comparacoes/">Shoulda x RSpec: Cuidado nas comparações</a></li>
    <li><a href="http://kylebanker.com/blog/2008/09/shoulda-testing-cheat-sheet/"><span id="repository_description">Shoulda Testing Cheat Sheet</span></a></li>
    <li><a href="http://groups.google.com/group/shoulda/browse_thread/thread/5aef44642bbda277"> Running single shoulda tests from the command line</a></li>
    <li><a href="http://www.thoughtbot.com/projects/shoulda">Making Tests Easy on the Fingers and Eyes</a></li>
</ul>


<p>O <a href="http://github.com/drnic/ruby-shoulda-tmbundle/tree/master">Bundle para o TextMate</a> que estou mantendo junto com o Dr. Nic no GitHub já está atualizado com todos os recursos da versão 2.0.2.</p>
</div>
  <footer>
    <a rel="full-article" href="/2008/10/01/shoulda-20/">Ler mais &rarr;</a>
  </footer>


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/page/23/">&larr; Antigos</a>
    
    <a href="/blog/archives">Arquivo</a>
    
    <a class="next" href="/page/21/">Novos &rarr;</a>
    
  </div>
</nav>

<script type="text/javascript">
    var disqus_shortname = 'carlosbrando';
    (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>
<aside role=sidebar>
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/06/13/a-regra-direita-esquerda-do-c/">A Regra Direita-Esquerda do C</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/03/colorific/">Colorific</a>
      </li>
    
      <li class="post">
        <a href="/2011/03/29/quem-disse-que-gravar-um-podcast-e-facil/">Quem disse que gravar um podcast é fácil?</a>
      </li>
    
      <li class="post">
        <a href="/2011/03/24/convite-para-o-grok-podcast/">Convite para o Grok Podcast!</a>
      </li>
    
      <li class="post">
        <a href="/2011/02/08/quatro-anos-de-nome-do-jogo/">Quatro anos de Nome do Jogo</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("carlosbrando", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/carlosbrando" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @carlosbrando</a>
  
</section>




  
</aside>

    </div>
  </div>
  <footer><p>
  Copyright &copy; 2011 - Carlos Brando -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
