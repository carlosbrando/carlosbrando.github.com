
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Nome do Jogo</title>
  <meta name="author" content="Carlos Brando">

  
  <meta name="description" content="Um novo livro está sendo preparado pela Pragmatic Programmers: The RSpec Book: Behaviour Driven Development with Ruby.O livro será escrito pelo pró...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://nomedojogo.com/page/19/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds2.feedburner.com/NomeDoJogo" rel="alternate" title="Nome do Jogo" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1249636-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Nome do Jogo</a></h1>
  
    <h2>por Carlos Brando</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds2.feedburner.com/NomeDoJogo" rel="subscribe-rss" title="assine via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:nomedojogo.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Pesquisar"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Arquivo</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/17/the-rspec-book-behaviour-driven-development-with-ruby/">The RSpec Book: Behaviour Driven Development with Ruby</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-17T00:00:00-02:00" pubdate  data-updated="true" >17 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Um novo livro está sendo preparado pela <strong>Pragmatic Programmers</strong>: <a href="http://www.pragprog.com/titles/achbd/the-rspec-book">The RSpec Book: Behaviour Driven Development with Ruby</a>.</p>

<p>O livro será escrito pelo próprio <strong>David Chelimsky</strong> (principal desenvolvedor e mantenedor do Rspec) e outros participantes de peso. A idéia é ser um livro introdutório sobre RSpec, Cucumber e outras ferramentas necessários para se fazer BDD com Ruby, e promete ser recheado de tutoriais e exemplos práticos.</p>

<p>O último capítulo do livro abordará testes no Rails usando todas as ferramentas e conceitos explorados nos primeiros capítulos.</p>

<p>Infelizmente a previsão para venda é somente para o mês de abril de 2009.</p>

<h3>Tópicos</h3>


<ul>
    <li>Foreward</li>
    <li>Introduction</li>
    <li>Tutorial: <span class="caps">BDD</span> with RSpec and Cucumber
<ul>
    <li>Mastermind</li>
</ul>
</li>
    <li>Behaviour Driven Development
<ul>
    <li>Writing Software That Matters</li>
    <li>It’s Not About Testing</li>
    <li>Coupling</li>
    <li>Mock Objects</li>
</ul>
</li>
    <li>RSpec
<ul>
    <li>Code Examples</li>
    <li>Expectations</li>
    <li>Mocking in RSpec</li>
    <li>RSpec and Test::Unit</li>
    <li>Tools and Integration</li>
    <li>Extending RSpec</li>
</ul>
</li>
    <li>Cucumber
<ul>
    <li>Cucumber</li>
</ul>
</li>
    <li>Behaviour Driven Rails
<ul>
    <li><span class="caps">BDD</span> in Rails</li>
    <li>Cucumber with Rails</li>
    <li>Webrat</li>
    <li>Rails Views</li>
    <li>Rails Helpers</li>
    <li>Rails Controllers</li>
    <li>Rails Models</li>
</ul>
</li>
</ul>


<p>Durante um tempo adotei o Shoulda com Test::Unit como meu principal framework de testes, mas depois que comecei a brincar com o <strong>Cucumber</strong> estou migrando para o RSpec. Mais detalhes <a href="http://www.nomedojogo.com/2008/11/13/shoulda-para-rspec-e-remarkable/">aqui</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/17/mito-1-rails-e-dificil-de-implantar/">Mito #1: Rails é difícil de implantar</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-17T00:00:00-02:00" pubdate  data-updated="true" >17 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>David Heinemeier Hansson iniciou uma série de artigos em seu <a href="http://www.loudthinking.com/posts/29-the-rails-myths">blog pessoal</a> <span style="color: #000000;"><span style="font-family: &quot;Lucida Grande&quot;,&quot;Lucida Sans Unicode&quot;,Tahoma,Verdana,sans-serif;">desmistificando</span></span> algumas crenças sobre o Ruby on Rails. Este texto não é uma tradução literal e sim uma explanação do <a href="http://www.loudthinking.com/posts/30-myth-1-rails-is-hard-to-deploy#mod_rails">primeiro artigo</a> de David.</p>

<p>Quando David lançou o <a href="http://www.basecamphq.com/">Basecamp</a> sob <a href="http://www.modruby.net/en/">mod_ruby,</a> há alguns anos atrás, ele não estava preocupado com o fato de que precisaria executar várias instâncias de um projeto Rails, tanto é que na época isto era um pouco complicado de se fazer, sem uma bela de uma gambiarra.</p>

<p>Naquela época só era possível executar o Rails sob CGI. Depois veio o FCGI, que ainda hoje é uma plataforma viável. Os softwares da 37signals foram executados sob esta plataforma durante alguns anos, mas esta parecia ser uma plataforma moribunda.</p>

<h2>Mongrel</h2>


<p>Foi nesta época em que apareceu o <a href="http://mongrel.rubyforge.org/">Mongrel</a>, e junto com ele a sensação de que não precisávamos de mais nenhum outro protocolo para fazer com que os servidores de aplicação e os servidores web conversassem.  Nós simplesmente podíamos usar HTTP! Hoje Mongrel, <a href="http://code.macournoyer.com/thin/">Thin</a>, <a href="http://ebb.rubyforge.org/">Ebb</a> e outros servidores web baseados em Ruby predominam nos ambientes de produção. E existem boas razões para isto, afinal eles são estáveis, versáteis e rápidos.</p>

<h2>Muitas opções</h2>


<p>Até aqui tudo parece muito bem, mas um problema apareceu: Entre tantas opções, qual é a melhor para colocar meu projeto em produção? Devo ir de Apache, nginx, ou quem sabe de lighttpd? Devo confiar nos proxies dos servidores web ou usar algo como o HAProxy ou Pound? Quantos processos do Mongrel devo usar? Seria bom usar alguma ferramenta para monitorar os processos? God ou Monit?</p>

<p>Todas estas são boas opções, mas isto gera um paradoxo das Boas Opções. Entre elas qual é a melhor? Este grande numero de Boas Opções é exatamente o que cria este primeiro mito sobre o Ruby on Rails. <strong>Sem saber exatamente qual ferramenta usar, conclui-se que é difícil implantar um projeto Rails.</strong></p>

<p>Como resolver este tipo de problema?</p>

<h2>Phusion Passenger™</h2>


<p><a href="http://www.modrails.com/">Passenger (mod_rails)</a>, é uma solução única que torna o deploy de aplicativos Rails tão fácil quanto um mod_php. Após um deploy ridiculamente simples, você tem um Apache se comportando como um web server, load balancer, application server e monitorador de processos. Você simplesmente joga seu aplicativo, altera o arquivo tmp/restart.txt e pronto, você está no ar!</p>

<p>Isto ainda não quer dizer que todos os grandes projetos Rails estão usando Passenger. Atualmente até mesmo os projetos da 37signals ainda não estão usando-o, pelo menos por enquanto.</p>

<p>O fato importante é que se houver alguma razão para isso, você pode montar todo o seu ambiente de produção manualmente com algumas das soluções mencionadas acima. Mas caso queira algo realmente simples e rápido, pode optar pelo Passenger, e confiar que esta é uma excelente opção.</p>

<p><strong>Resumindo, Rails é difícil de implantar? Não! Phusion Passenger tornou o processo de implantação de projetos Rails ridiculamente simples.</strong></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/17/darkcast-edicao-especial-railssummit/">DarkCast - Edição Especial RailsSummit</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-17T00:00:00-02:00" pubdate  data-updated="true" >17 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Coloque um bando de nerds em uma Van, apague a luz e prenda-os no trânsito de São Paulo por algumas horas. Qual seria o resultado?</p>

<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="500" height="409" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://vimeo.com/moogaloop.swf?clip_id=2094245&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" /><embed type="application/x-shockwave-flash" width="500" height="409" src="http://vimeo.com/moogaloop.swf?clip_id=2094245&amp;server=vimeo.com&amp;show_title=0&amp;show_byline=0&amp;show_portrait=0&amp;color=00ADEF&amp;fullscreen=1" allowscriptaccess="always" allowfullscreen="true"></embed></object>


<p>O vídeo mais maneiro sobre o Rails Summit Latin America, sem dúvida!</p>

<p>Parabéns pelo trabalho, vocês deviam se juntar e fazer isto mais vezes, mas não precisa ser sempre no escurinho&#8230;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/14/rails-22-tornando-atributos-do-activerecord-privados/">Rails 2.2: Tornando atributos do ActiveRecord privados</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-14T00:00:00-02:00" pubdate  data-updated="true" >14 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>No Rails 2.2 você poderá definir atributos do <strong>ActiveRecord</strong> como <strong>private</strong>. Como estes atributos são criados via metaprogramação, até agora isto era impossível.</p>

<p>Para entender como isto funcionará, vamos tornar o atributo <strong>name</strong> da classe <strong>User</strong> privado:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails source_ruby_rails_shoulda"><span class="meta meta_rails meta_rails_model"><span class="meta meta_class meta_class_ruby"><span class="keyword keyword_control keyword_control_class keyword_control_class_ruby">class</span> <span class="entity entity_name entity_name_type entity_name_type_class entity_name_type_class_ruby">User<span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_ruby"> <span class="punctuation punctuation_separator punctuation_separator_inheritance punctuation_separator_inheritance_ruby">&lt;</span> ActiveRecord::Base</span></span></span>

  <span class="keyword keyword_other keyword_other_special-method keyword_other_special-method_ruby">private</span>
  <span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">name</span></span>
    <span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>I'm private<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span>
  <span class="keyword keyword_control keyword_control_ruby">end</span>

</span><span class="keyword keyword_control keyword_control_ruby">end</span></span></pre>


<p>Agora ao tentar recuperar o valor do atributo <strong>name</strong>:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails">user <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_ruby">=</span> <span class="support support_class support_class_ruby">User</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>first
<span class="comment comment_line comment_line_number-sign comment_line_number-sign_ruby"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_ruby">#</span> =&gt; #&lt;User id: 1, name: "teste", created_at: "2008-09-26 21:55:23", updated_at: "2008-09-26 21:55:23"&gt;
</span>
user<span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>name
<span class="comment comment_line comment_line_number-sign comment_line_number-sign_ruby"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_ruby">#</span> =&gt; NoMethodError: undefined method `NoMethodError' for #&lt;User:0x234df08&gt;
</span><span class="comment comment_line comment_line_number-sign comment_line_number-sign_ruby"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_ruby">#</span>    from /Users/carlosbrando/Projects/sandbox/edge/vendor/rails/activerecord/lib/active_record/attribute_methods.rb:260:in `method_missing'
</span><span class="comment comment_line comment_line_number-sign comment_line_number-sign_ruby"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_ruby">#</span>    from /Users/carlosbrando/Projects/sandbox/edge/vendor/rails/activerecord/lib/active_record/attribute_methods.rb:236:in `method_missing'
</span><span class="comment comment_line comment_line_number-sign comment_line_number-sign_ruby"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_ruby">#</span>    from (irb):3</span></span></pre>


<p>Veja que uma exceção <strong>NoMethodError</strong> foi disparada ao executar o método que agora é privado. Por outro lado eu posso alterar o nome do usuário, já que o método <strong>name=</strong> ainda é público.</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails">user<span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>name <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_ruby">=</span> <span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>Carlos<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span>
<span class="comment comment_line comment_line_number-sign comment_line_number-sign_ruby"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_ruby">#</span> =&gt; "Carlos"
</span></span></pre>


<hr /><em>Todos os exemplos dados aqui funcionarão somente no <strong>Ruby on Rails 2.2 ou superior</strong>. Você pode encontrar mais detalhes sobre esta e outras novidades do Rails 2.2 no e-book “<a href="../2008/10/24/novo-livro-e-screencast-ruby-on-rails-22-o-que-ha-de-novo/">Ruby on Rails - O que há de novo?</a>“.</em>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/14/rails-22-rc2/">Rails 2.2 RC2</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-14T00:00:00-02:00" pubdate  data-updated="true" >14 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Conforme previ no último <a href="http://www.nomedojogo.com/2008/11/11/rails-podcast-brasil-episodio-37/">podcast</a>, saiu o segundo release candidate do Rails 2.2. Esta versão ficou classificada como 2.2.1 e deve ser a última antes do lançamento oficial do Rails 2.2, que deve aparecer como 2.2.3.</p>

<p>Foi criado um novo <a href="http://github.com/rails/rails/tree/2-2-stable">branch</a> para esta versão no GitHub, o que significa um congelamento do que temos até agora, nenhuma outra novidade será incluída de agora em diante para esta versão. Também podemos definir que a partir de agora tudo de novo quer for acrescentado ao Rails será para uma futura versão 2.3 ou 3.0.</p>

<p>Para os que já desejam ir testando esta nova versão, primeiro devem atualizar o RubyGems para a versão 1.3.1:</p>

<pre class="textmate-source"><span class="text text_html text_html_markdown"><span class="meta meta_paragraph meta_paragraph_markdown">gem update --system</span></span></pre>


<p>Só então instalar o novo gem:</p>

<pre class="textmate-source"><span class="text text_html text_html_markdown"><span class="meta meta_paragraph meta_paragraph_markdown">gem install rails -s http://gems.rubyonrails.org</span></span></pre>


<p>Enjoy!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/13/shoulda-para-rspec-e-remarkable/">Shoulda para RSpec é Remarkable!</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-13T00:00:00-02:00" pubdate  data-updated="true" >13 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Durante um bom tempo andei evangelizando o uso do <a href="http://www.thoughtbot.com/projects/shoulda">Shoulda</a> na <a href="http://surgeworks.com/">Surgeworks</a> e fiz muito uso dele em meus projetos pessoais. O fato é que não obtive muito sucesso em evangelizar meus colegas de trabalho a adotarem o Shoulda, por outro lado eles conseguiram me convencer a aprender e usar <a href="http://rspec.info/">RSpec</a>.</p>

<p>E realmente RSpec é um framework de testes muito interessante. Mas tudo ficou ainda mais interessante quando comecei a brincar com o <strong>Cucumber</strong> (pretendo escrever sobre isto no futuro).</p>

<p>Mas o segredo do sucesso do Shoulda é a maneira em que ele transforma testes comuns como verificar se as associações estão funcionando, se todas as validações necessárias foram adicionadas ou se uma simples informação foi adicionada corretamente a sessão, em algo extremamente trivial.</p>

<p>Passei a gostar cada dia mais do RSpec e decidi adotá-lo como meu framework oficial de testes de agora em diante. Mas não posso mais viver sem as facilidades que o Shoulda me oferecia. Então resolvi coçar a minha própria coceira.</p>

<h2>Remarkable</h2>


<p>Inicialmente, a função do <a href="http://github.com/carlosbrando/remarkable/tree/master">Remarkable</a> é portar para RSpec todas as macros do Shoulda, mas obviamente o plano é muito mais ambicioso do que isto. Tenho muita coisa em mente que tornará este projeto especialmente útil para os usuários de RSpec.</p>

<p>Neste momento você talvez se pergunte: &#8220;Mas já não existem plugins que fazem a mesma coisa, como o skinny e o rspec-on-rails-matchers, por exemplo?&#8221;. Sou obrigado a responder: &#8220;Sim&#8221;. Então, por que mais um projeto?</p>

<h2>Por que mais um projeto?</h2>


<p>Em primeiro lugar este não é simplesmente &#8220;mais um&#8221; plugin com matchers para RSpec. Vou usar um clichê agora, mas é mais pura verdade: &#8220;Este é um projeto feito do jeito certo!&#8221;.</p>

<p>Vejamos então uma lista com o que torna o <strong>Remarkable</strong> único:</p>

<ol>
    <li>Não é um plugin, e sim um gem.</li>
    <li>Porta todas as macros atuais do Shoulda para RSpec.</li>
    <li>Possui duas sintaxes de escrita, uma para quem gosta do estilo RSpec e outra para os que estão migrando seus projetos Shoulda para RSpec.</li>
    <li>Testes.</li>
    <li>Mais testes.</li>
    <li>E mais um pouco de testes.</li>
</ol>


<p>Sim, diferente de todos os outros projetos com o mesmo objetivo, o <strong>Remarkable</strong> é o único que possui testes, e este é um grande diferencial, acredite! Como se pode confiar em um projeto que não tem testes? Como evoluir um projeto open-source que não possui testes? O que garante que o último commit não quebrou alguma coisa que estava funcionando?</p>

<h2>Instalação</h2>


<p>Instalar o <strong>Remarkable</strong> é muito fácil. Ele está armazenado no <a href="http://github.com/carlosbrando/remarkable/tree/master">GitHub</a>, então se você nunca instalou um gem via GitHub execute primeiro:</p>

<pre class="textmate-source"><span class="text text_plain"><span class="meta meta_paragraph meta_paragraph_text">gem sources -a <span class="markup markup_underline markup_underline_link markup_underline_link_text">http://gems.github.com</span></span></span></pre>


<p>Agora instale o gem:</p>

<pre class="textmate-source"><span class="text text_plain"><span class="meta meta_paragraph meta_paragraph_text">sudo gem install carlosbrando-remarkable</span></span></pre>


<p>Por último adicione a seguinte linha no seu arquivo RAILS_ROOT/config/environment.rb:</p>

<pre class="textmate-source"><span class="text text_plain"><span class="meta meta_paragraph meta_paragraph_text">config.gem "carlosbrando-remarkable", :lib =&gt; "remarkable", :source =&gt; "<span class="markup markup_underline markup_underline_link markup_underline_link_text">http://gems.github.com</span>"</span></span></pre>


<h2>Usando</h2>


<p>Todas as macros do <strong>Remarkable</strong> podem ser acessadas de duas maneira diferentes. Para aqueles que preferem o <strong>estilo Shoulda</strong>, vejamos como ficaria o teste de um modelo:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rspec"><span class="meta meta_rspec meta_rspec_behaviour"><span class="keyword keyword_other keyword_other_rspec keyword_other_rspec_behaviour">describe</span> <span class="variable variable_other variable_other_constant variable_other_constant_ruby">Post</span> <span class="keyword keyword_control keyword_control_ruby keyword_control_ruby_start-block">do</span></span>
  fixtures <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>all</span>

  should_belong_to <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>user</span>
  should_belong_to <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>owner</span>
  should_belong_to <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>user</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>owner</span>

  should_have_many <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>tags</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>taggings</span>
  should_have_many <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through_tags</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>taggings</span>
  should_have_many <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>tags</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through_tags</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>taggings</span>

  should_require_unique_attributes <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>title</span>
  should_require_attributes <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>body</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>message</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="string string_regexp string_regexp_classic string_regexp_classic_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_ruby">/</span>wtf<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_ruby">/</span></span>
  should_require_attributes <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>title</span>
  should_only_allow_numeric_values_for <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>user_id</span>
<span class="keyword keyword_control keyword_control_ruby">end</span></span></pre>


<p>Igualzinho ao Shoulda? É esta a idéia! Esta sintaxe é ideal para aqueles que desejarem migrar seus testes do Shoulda para o RSpec (tendo apenas de alterar de context para describe e de should para it) ou mesmo para os que adoram a jeitão do Shoulda, assim como eu.</p>

<p>Mas se você não gosta desta sintaxe, também pode criar os mesmos testes da seguinte forma:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rspec"><span class="meta meta_rspec meta_rspec_behaviour"><span class="keyword keyword_other keyword_other_rspec keyword_other_rspec_behaviour">describe</span> <span class="variable variable_other variable_other_constant variable_other_constant_ruby">Post</span> <span class="keyword keyword_control keyword_control_ruby keyword_control_ruby_start-block">do</span></span>
  fixtures <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>all</span>

<span class="meta meta_rspec meta_rspec_example">  <span class="keyword keyword_other keyword_other_rspec keyword_other_rspec_example">it</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should belong_to<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>user</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>
  it <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should belong_to<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>owner</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>
  it <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should belong_to<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>user</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>owner</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>

  it <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should have_many<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>tags</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>taggings</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>
  it <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should have_many<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through_tags</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>taggings</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>
  it <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should have_many<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>tags</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through_tags</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>through</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>taggings</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>

  it <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should require_unique_attributes<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>title</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>
  it <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should require_attributes<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>body</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>message</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="string string_regexp string_regexp_classic string_regexp_classic_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_ruby">/</span>wtf<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_ruby">/</span></span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>
  it <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should require_attributes<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>title</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>
  it <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span>should only_allow_numeric_values_for<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>user_id</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>
<span class="keyword keyword_control keyword_control_ruby">end</span>
</span></span></pre>


<p>Agora muito mais no <strong>estilo RSpec</strong>!</p>

<h2>Macros</h2>


<p>Veja uma relação com todas as macros disponíveis na documentação do projeto.</p>

<p>Para o estilo Shoulda, <a href="http://remarkable.nomedojogo.com/classes/Remarkable/Syntax/Shoulda.html">clique aqui</a>.
Para o estilo RSpec, <a href="http://remarkable.nomedojogo.com/classes/Remarkable/Syntax/RSpec.html">clique aqui</a>.</p>

<h2>Finalizando</h2>


<p>Este projeto já atingiu o primeiro objetivo, que era portar todas as macros do Shoulda para o RSpec. Tudo feito da maneira correta, com todos os cuidados e muitos testes. Mas nada melhor do que o uso na prática para encontrarmos pontos que devem ser melhorados.</p>

<p>Enfim, usem o <strong>Remarkable</strong>, e ajudem a torná-lo ainda melhor!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/12/por-que-paperclip/">Por que Paperclip?</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-12T00:00:00-02:00" pubdate  data-updated="true" >12 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="alignright size-full wp-image-1767" title="Paperclip" src="http://old.nomedojogo.com/wp-content/uploads/2008/11/395376506_9f9213734f_m.jpg" alt="" />No último <a href="http://www.nomedojogo.com/2008/11/05/rails-podcast-brasil-episodio-36/">podcast</a> mencionei minha escolha pelo <a href="http://www.thoughtbot.com/projects/paperclip/">Paperclip</a> como meu plugin preferido para upload de arquivos. Depois disso algumas pessoas tem me perguntado porque usá-lo, já que o attachment_fu seria a opção mais conhecida.</p>

<p>Durante muito tempo usei o <a href="http://github.com/technoweenie/attachment_fu/wikis">attachment_fu</a> para esta função, mas em um projeto recente da Surgeworks optei por testar o Paperclip e depois disso acabei adotando-o como meu plugin padrão para uploads. Confesso que de inicio o grande motivo para experimentar o novo plugin foi por ele ter sido criado pela <a href="http://www.thoughtbot.com/">thoughtbot</a>, o mesmo time que criou o <a href="http://www.thoughtbot.com/projects/shoulda">Shoulda</a> (que não estou usando mais, mas é uma outra história que vou explicar em um outro post), e como os caras são bons e tem criado inúmeros projetos interessantes, resolvi dar uma chance.</p>

<p>Mas foram alguns detalhes que me chamaram a atenção, como o fato de você não precisar de uma tabela extra no banco de dados para armazenar o caminho dos arquivos, a forma simplificada que ele oferece para se acessar e configurar o tamanho das fotos enviadas para o servidor, a macro de teste preparada para o Shoulda, a facilidade para configurar o acesso ao Amazon S3, entre outros detalhes que valorizam o plugin.</p>

<p>Enfim, não existe um grande motivo que chegue a desvalorizar o famoso attachment_fu ou torná-lo obsoleto. São apenas alguns pequenos detalhes que me conquistaram, só isso. É puramente uma questão de preferência  pessoal.</p>

<p>Não importa qual plugin de upload você use, só não esqueça do <code>:multipart =&gt; true</code> na construção do formulário!</p>

<h2>Usando o Paperclip em 3 passos</h2>


<ol>
<li>Instale o plugin em seu projeto Rails:</li>
</ol>


<pre class="textmate-source"><span class="source source_sql source_sql_ruby">./script/plugin install git://github.com/thoughtbot/paperclip.git</span></pre>


<ol>
<li>Adicione três colunas na tabela que armazenará os dados dos arquivos:</li>
</ol>


<pre class="textmate-source"><span class="source source_ruby source_ruby_rails"><span class="meta meta_rails meta_rails_migration"><span class="meta meta_class meta_class_ruby"><span class="keyword keyword_control keyword_control_class keyword_control_class_ruby">class</span> <span class="entity entity_name entity_name_type entity_name_type_class entity_name_type_class_ruby">AddAvatarColumnsToUser<span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_ruby"> <span class="punctuation punctuation_separator punctuation_separator_inheritance punctuation_separator_inheritance_ruby">&lt;</span> ActiveRecord::Migration</span></span></span>
  <span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">self.up</span></span>
    add_column <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>users</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar_file_name</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span>    <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>string</span>
    add_column <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>users</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar_content_type</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>string</span>
    add_column <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>users</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar_file_size</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span>    <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>integer</span>
    add_column <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>users</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar_updated_at</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span>   <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>datetime</span>
  <span class="keyword keyword_control keyword_control_ruby">end</span>

  <span class="meta meta_function meta_function_method meta_function_method_without-arguments meta_function_method_without-arguments_ruby"><span class="keyword keyword_control keyword_control_def keyword_control_def_ruby">def</span> <span class="entity entity_name entity_name_function entity_name_function_ruby">self.down</span></span>
    remove_column <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>users</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar_file_name</span>
    remove_column <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>users</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar_content_type</span>
    remove_column <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>users</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar_file_size</span>
    remove_column <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>users</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar_updated_at</span>
  <span class="keyword keyword_control keyword_control_ruby">end</span>
</span><span class="keyword keyword_control keyword_control_ruby">end</span>
</span></pre>


<ol>
<li>Adicione uma linha no modelo com as configurações desejadas (tive de dividir em mais linhas para caber no blog):</li>
</ol>


<pre class="textmate-source"><span class="source source_ruby source_ruby_rails"><span class="meta meta_rails meta_rails_model"><span class="meta meta_class meta_class_ruby"><span class="keyword keyword_control keyword_control_class keyword_control_class_ruby">class</span> <span class="entity entity_name entity_name_type entity_name_type_class entity_name_type_class_ruby">User<span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_ruby"> <span class="punctuation punctuation_separator punctuation_separator_inheritance punctuation_separator_inheritance_ruby">&lt;</span> ActiveRecord::Base</span></span></span>
  has_attached_file <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar</span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span>
                    <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>styles</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">{</span><span class="meta meta_syntax meta_syntax_ruby meta_syntax_ruby_start-block"> </span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>medium</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>300x300&gt;<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span>
                                 <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>thumb</span> <span class="punctuation punctuation_separator punctuation_separator_key-value">=&gt;</span> <span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>100x100&gt;<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span> <span class="punctuation punctuation_section punctuation_section_scope punctuation_section_scope_ruby">}</span>
</span><span class="keyword keyword_control keyword_control_ruby">end</span></span></pre>


<p>Leve ao forno e sirva à vontade!</p>

<p>No exemplo acima acabamos de adicionar um avatar (a famosa fotinha) para os usuários. Para recuperar a foto enviada pelo usuário, use:</p>

<pre class="textmate-source"><span class="text text_html text_html_ruby"><span class="source source_ruby source_ruby_rails source_ruby_rails_embedded source_ruby_rails_embedded_html"><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_ruby">&lt;%=</span> image_tag <span class="variable variable_other variable_other_readwrite variable_other_readwrite_instance variable_other_readwrite_instance_ruby"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_ruby">@</span>user</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>avatar<span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>url <span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_ruby">%&gt;</span></span>
<span class="source source_ruby source_ruby_rails source_ruby_rails_embedded source_ruby_rails_embedded_html"><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_ruby">&lt;%=</span> image_tag <span class="variable variable_other variable_other_readwrite variable_other_readwrite_instance variable_other_readwrite_instance_ruby"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_ruby">@</span>user</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>avatar<span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>url<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>medium</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_ruby">%&gt;</span></span>
<span class="source source_ruby source_ruby_rails source_ruby_rails_embedded source_ruby_rails_embedded_html"><span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_ruby">&lt;%=</span> image_tag <span class="variable variable_other variable_other_readwrite variable_other_readwrite_instance variable_other_readwrite_instance_ruby"><span class="punctuation punctuation_definition punctuation_definition_variable punctuation_definition_variable_ruby">@</span>user</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>avatar<span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>url<span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">(</span><span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>thumb</span><span class="punctuation punctuation_section punctuation_section_function punctuation_section_function_ruby">)</span> <span class="punctuation punctuation_section punctuation_section_embedded punctuation_section_embedded_ruby">%&gt;</span></span></span></pre>


<p>O attachment_fu também não é tão diferente disso, mas gosto mais do Papeclip. Apenas para fechar o artigo, um bônus! Para testar se o Paperclip está funcionando você pode pegar a <a href="http://giantrobots.thoughtbot.com/2008/6/3/testing-paperclip-with-shoulda">macro para Shoulda</a>, e depois adicionar uma linha ao teste do modelo:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails"><span class="meta meta_rails meta_rails_unit_test"><span class="meta meta_class meta_class_ruby"><span class="keyword keyword_control keyword_control_class keyword_control_class_ruby">class</span> <span class="entity entity_name entity_name_type entity_name_type_class entity_name_type_class_ruby">UserTest<span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_ruby"> <span class="punctuation punctuation_separator punctuation_separator_inheritance punctuation_separator_inheritance_ruby">&lt;</span> Test::Unit::TestCase</span></span></span>
  should_have_attached_file <span class="constant constant_other constant_other_symbol constant_other_symbol_ruby"><span class="punctuation punctuation_definition punctuation_definition_constant punctuation_definition_constant_ruby">:</span>avatar</span>
</span><span class="keyword keyword_control keyword_control_ruby">end</span></span></pre>


<p>Excelsior!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/11/rails-podcast-brasil-episodio-37/">Rails Podcast Brasil - Episódio 37</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-11T00:00:00-02:00" pubdate  data-updated="true" >11 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="alignnone size-full wp-image-1779" title="83051034_718981dd39" src="http://old.nomedojogo.com/wp-content/uploads/2008/11/83051034_718981dd39.jpg" alt="" /></p>

<p>Mais uma semana cheia de novidades! Tivemos o lançamento da versão 1.0 (finalmente) do Merb e também do JRuby 1.1.5. Além disso o RubyMine, uma nova IDE para desenvolvimento Rails foi liberada. Veja nossa opinião sobre estes lançamentos.</p>

<p>Também comentamos sobre alguns projetos importantes como Redshift, Shoes, Rails Guides e Roxy. Saiba porque você deve dar sua atenção para cada um deles.</p>

<h2>Neste episódio</h2>


<ul>
    <li><a href="http://ajaxian.com/archives/redshift-what-ruby-and-a-nice-api-can-do-in-the-browser">Redshift: What Ruby and a nice API can do in the browser</a></li>
    <li><a href="http://merbist.com/2008/11/09/merb-1-0-released/">Merb 1.0 released</a></li>
    <li><a href="http://db2onrails.com/2008/11/08/a-major-milestone-for-db2-on-rails/">A major milestone for DB2 on Rails</a></li>
    <li><a href="http://workswithruby.com/2008/10/session_lifetime-plugin">session_lifetime plugin</a></li>
    <li><a href="http://www.akitaonrails.com/2008/11/10/micro-tutorial-de-ruby">Micro-Tutorial de Ruby</a></li>
    <li><a href="http://rubylearning.com/blog/2008/10/31/ruby-and-shoes-programming-a-new-course/">Ruby and Shoes Programming: A New Course</a></li>
    <li><a href="http://www.rubyinside.com/rubymine-a-new-intelligent-ruby-ide-built-on-intellj-1302.html">RubyMine: A New “Intelligent” Ruby IDE Built on IntellJ</a></li>
    <li><a href="http://github.com/37signals/cached_externals/tree/master">cached_externals</a></li>
    <li><a href="http://www.hashcode.eti.br/?p=90">RailsTree 0.8</a></li>
    <li><a href="http://weblog.rubyonrails.org/2008/11/3/rails-guides-wants-you">Rails Guides Wants You</a></li>
    <li><a href="http://www.rubyinside.com/3-tools-for-drying-your-ruby-code-1305.html">3 Tools for DRYing Your Ruby Code</a></li>
    <li><a href="http://evil.che.lu/2008/10/29/braid-0-5-vendor-your-git-and-svn-repositories">ANN: braid 0.5 – vendor your git and svn repositories</a></li>
    <li><a href="http://www.slideshare.net/adamwiggins/lightweight-webservices-with-sinatra-and-restclient-presentation?type=powerpoint">Lightweight Webservices with Sinatra and RestClient</a></li>
    <li><a href="http://envycasts.com/products/scaling-ruby">Scaling Ruby</a></li>
    <li><a href="http://ryandaigle.com/articles/2008/11/10/implement-ruby-proxy-objects-with-roxy">Roxy: A Ruby Proxy-Object Library</a></li>
    <li><a href="http://www.infoq.com/br/news/2008/11/jruby-115">Liberado o JRuby 1.1.5</a></li>
    <li><a href="http://apocryph.org/more_indepth_analysis_ruby_http_client_performance">A more in-depth analysis of Ruby HTTP client performance</a></li>
    <li><a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/318771">Ruby 1.9.1 preview1 is out</a></li>
    <li><a href="http://blog.hungrymachine.com/2008/11/8/how-to-save-100m-of-ram-per-mongrel">How to save 100m of RAM per mongrel</a></li>
    <li><a href="http://madstop.com/2008/11/06/a-short-puppet-history-pt-2-cfengine/">A Short Puppet History, pt. 2: Cfengine</a></li>
</ul>


<p><strong>Download</strong>: <a href="http://download.podcast.rubyonrails.pro.br/RailsPodcastBrasil_037.mp3">Episódio #37</a>
iTunes: <a href="http://podcast.rubyonrails.pro.br/rss">http://podcast.rubyonrails.pro.br/rss</a>
Episódios anteriores: <a href="http://podcast.rubyonrails.pro.br/">http://podcast.rubyonrails.pro.br/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/10/novo-curso-de-ruby-e-shoes/">Novo curso de Ruby e Shoes</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-10T00:00:00-02:00" pubdate  data-updated="true" >10 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="alignnone size-full wp-image-1761" title="shoes-stone3" src="http://old.nomedojogo.com/wp-content/uploads/2008/11/shoes-stone3.jpg" alt="" /></p>

<p>O famoso site <a href="http://rubylearning.com/blog">RubyLearning</a> administrado por Satish Talim vem ensinando Ruby gratuitamente para programadores do mundo todo já faz algum tempo. Satish tem feito um trabalho excepcional com estes cursos e merece todo o reconhecimento da comunidade Ruby mundial.</p>

<p>A grande novidade é o novo curso de Ruby e Shoes que começará no próximo dia 15 de novembro, ministrado pelo <em>Shoes Ninja </em><strong><a href="http://newwws.shoooes.net/2008/09/27/the-ashbb-shoes-class.html">Satoshi Asakawa</a></strong>, do Japão.</p>

<p>O curso tem um custo simbólico de 5 dólares, que serve apenas para ajudar Satish a manter o site e continuar oferecendo cursos.</p>

<p>Para quem não conhece, o <a href="http://shoooes.net/">Shoes</a> é uma biblioteca criada por <a href="http://why.nomedojogo.com/">Why The Lucky Stiff</a> para a criação de aplicativos desktop multiplataforma em Ruby. Para fazer o curso, basta se <a href="http://rubylearning.org/">cadastrar</a> no site e pagar a taxa de <a href="http://rubylearning.org/class/course/view.php?id=16">inscrição</a>. Mas é importante ter um conhecimento mínimo de Ruby para ter um bom compreendimento do curso, caso contrário recomendo se inscrever em uma das turmas gratuitas de Ruby antes.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/10/merb-10-released/">Merb 1.0 Released</a></h1>
    
    
      <p class="meta">
        





  



<time datetime="2008-11-10T00:00:00-02:00" pubdate  data-updated="true" >10 de Novembro de 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="size-full wp-image-1770 alignright" title="Merb" src="http://old.nomedojogo.com/wp-content/uploads/2008/11/2939711285_b573d9b52c_o.jpg" alt="" width="300" height="237" />Depois do Rails, o framework mais famoso para Ruby com certeza é o <a href="http://www.merbivore.com/">Merb</a>. O problema com o Merb até agora era a falta de uma versão 1.0 finalizada, garantindo que não haveria mais mudanças drásticas na API. Muitos desenvolvedores ainda não queriam se arriscar neste framework com medo das mudanças que poderiam vir até o lançamento de uma versão 1.0 estável.</p>

<p>Depois de dois anos de desenvolvimento, <strong>Ezra Zygmuntowicz</strong> e o core team do Merb <a href="http://brainspl.at/articles/2008/11/08/merb-1-0">anunciam</a> o lançamento da versão 1.0.</p>

<p>No site <a href="http://www.rubyinside.com/44-merb-resources-1318.html">RubyInside</a>, <strong>Peter Cooper</strong> publicou um artigo com <strong>44 links</strong> de tutoriais, noticias, livros, eventos e aplicativos de exemplo para os que desejam se aventurar no Merb.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/20/">&larr; Antigos</a>
    
    <a href="/blog/archives">Arquivo</a>
    
    <a class="next" href="/page/18/">Novos &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Artigos Recentes</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/10/18/grok-podcast-extra-o-que-voce-achou/">Grok Podcast Extra - O que você achou?</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/12/contratos-onde-todos-ganham/">Contratos onde todos ganham</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/25/como-convencer-sua-equipe-a-usar-um-sistema-de-controle-de-vers-o/">Como convencer sua equipe a usar um sistema de controle de versão</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/19/blogando-como-um-hacker/">Blogando como um hacker</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/13/a-regra-direita-esquerda-do-c/">A Regra Direita-Esquerda do C</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Open Source</h1>
  <ul id="gh_repos">
    <li class="loading">Atualizando&#8230;</li>
  </ul>
  
  <a href="https://github.com/carlosbrando">@carlosbrando</a> no Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'carlosbrando',
            count: 4,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Últimos Tweets</h1>
  <ul id="tweets">
    <li class="loading">Atualizando&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("carlosbrando", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/carlosbrando" class="twitter-follow-button" data-width="208px" data-show-count="false">Siga @carlosbrando</a>
  
</section>


<section>
  <h1>Bookmarks</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/cbrando?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/cbrando">Meus Bookmarks &raquo;</a></p>
</section>


<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/109235566448786781079?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - Carlos Brando -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
    
      var disqus_shortname = 'carlosbrando';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>


  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
