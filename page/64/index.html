
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Nome do Jogo</title>
  <meta name="author" content="Carlos Brando">

  
  <meta name="description" content="Estou meio enrolado com o projeto em que estou trabalhando e some a isto que na semana que vem tem o RejectConf&#8217;07 aqui em sampa e eu estou &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://nomedojogo.com/page/64">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds2.feedburner.com/NomeDoJogo" rel="alternate" title="Nome do Jogo" type="application/atom+xml">
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1249636-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Nome do Jogo</a></h1>
  
    <h2>por Carlos Brando</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds2.feedburner.com/NomeDoJogo" rel="subscribe-rss" title="assine via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:nomedojogo.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Pesquisar"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Arquivo</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/09/limpando-todos-os-campos-de-um-form-via-rjs/">Limpando todos os campos de um Form via RJS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-09T00:00:00-02:00" pubdate data-updated="true"> 9 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/101157537_5bc684bb44.jpg" alt="101157537_5bc684bb44.jpg" /></p>

<p>Estou meio enrolado com o projeto em que estou trabalhando e some a isto que na semana que vem tem o <a href="http://www.akitaonrails.com/2007/11/9/aviso-importante-rejectconf-sp-07"><strong>RejectConf&#8217;07</strong></a> aqui em sampa e eu estou tentando preparar uma apresentação.</p>

<p>Mas eu não posso deixar este blog de lado, então para ninguém dizer que eu não posto mais, vai uma dica util para quem usa <strong>RJS</strong>.</p>

<p>Imagine aquela página cheia de campos, que você precisa limpar via <strong>RJS</strong>. Já vi muita gente limpando campo por campo dentro do código, isto é horrível, além de encher o saco.</p>

<p>Acontece que o elemento <strong>Form</strong> (<strong>HTML</strong>) possui um método <strong>reset()</strong> que faz exatamente isto. Via <strong>JavaScript</strong> poderíamos limpar todos os campos de um formulário de uma só vez com o seguinte código:</p>

<pre class="textmate-source"><span class="source source_js"><span class="support support_class support_class_js">document</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span><span class="support support_constant support_constant_dom support_constant_dom_js">forms</span><span class="meta meta_brace meta_brace_square meta_brace_square_js">[</span><span class="string string_quoted string_quoted_double string_quoted_double_js"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_js">"</span>meu_form<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_js">"</span></span><span class="meta meta_brace meta_brace_square meta_brace_square_js">]</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span><span class="support support_function support_function_dom support_function_dom_js">reset</span><span class="meta meta_brace meta_brace_round meta_brace_round_js">()</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span></span></pre>


<p>Então, para fazer o mesmo via seu <strong>RJS</strong> bastaria fazer assim:</p>

<pre class="textmate-source"><span class="source source_ruby source_ruby_rails">page<span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>call <span class="string string_quoted string_quoted_single string_quoted_single_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">'</span>Form.reset<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">'</span></span><span class="punctuation punctuation_separator punctuation_separator_object punctuation_separator_object_ruby">,</span> <span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>meu_form<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span>

<span class="comment comment_line comment_line_number-sign comment_line_number-sign_ruby"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_ruby">#</span> ou
</span>
page<span class="punctuation punctuation_section punctuation_section_array punctuation_section_array_ruby">[</span><span class="string string_quoted string_quoted_double string_quoted_double_ruby"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_ruby">"</span>meu_form<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_ruby">"</span></span><span class="punctuation punctuation_section punctuation_section_array punctuation_section_array_ruby">]</span><span class="punctuation punctuation_separator punctuation_separator_method punctuation_separator_method_ruby">.</span>reset</span></pre>


<p>Eu sei que muitos já sabiam disto, mas como tem muita gente nova aprendendo <strong>Ruby on Rails</strong>, acho que vale a dica!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/08/novidades-no-wwr/">Novidades no WWR</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-08T00:00:00-02:00" pubdate data-updated="true"> 8 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/35640128_f8a01da924.jpg" alt="35640128_f8a01da924.jpg" /></p>

<p>Em breve teremos novidades no <a href="http://www.workingwithrails.com/recommendation/new/person/8137-carlos-brando">WWR (Working With Rail)</a>. Eu tive a oportunidade de fazer um teste na nova versão, e já vi a novo fórum que o site terá.</p>

<p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/wwr.jpg" alt="wwr.jpg" /></p>

<p>Eu sempre falo e não canso de repetir, este é um dos mais importantes sites de Ruby on Rails que temos. &Eacute; o lugar ideal para encontrar quem está usando esta tecnologia e para ser encontrado também.</p>

<p>Se você ainda não se cadastrou, faça isto logo. E me <a href="http://www.workingwithrails.com/recommendation/new/person/8137-carlos-brando">recomenda</a>&#8230; rs</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/07/personas-ou-pessoas-reais/">Personas ou pessoas reais?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-07T00:00:00-02:00" pubdate data-updated="true"> 7 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/1896661471_33aacb975f.jpg" alt="1896661471_33aacb975f.jpg" /></p>

<p>Este artigo é uma tradução <a href="http://www.37signals.com/svn/posts/690-ask-37signals-personas">deste post</a> do blog <strong>Signal vs. Noise</strong>.</p>

<p>Scott pergunta:</p>

<blockquote>Vocês usam <a href="http://pt.wikipedia.org/wiki/Persona">personas</a> (neste caso persona se refere a um personagem fictício, que representa o usuário do software) quando pensam nos usuários de um novo aplicativo?</blockquote>


<p>Não usamos personas. Usamos nós mesmos. Acredito que personas levam a uma falsa sensação de entendimento.</p>

<p>Cada produto que construímos é um produto criado para resolver os nossos próprios problemas. Reconhecemos que os nossos problemas não são exclusivos. De fato, nossos problemas são provavelmente muito parecidos com os seus. Portanto, nós solucionamos os nossos problemas na forma de um software para a Web e depois o vendemos para pessoas que possuem o mesmo problema.</p>

<p>Reconhecemos que nem todos compartilham dos nossos problemas, do nosso ponto de vista, ou da nossas opiniões, e isto também será verdade ser você usar personas. Tomar decisões baseadas em pareceres verdadeiros é melhor do que tomar decisões baseadas em pareceres imaginários.</p>

<p>Eu nunca acreditei em personas. Eles são artificiais, abstratos e fictícios. Eu não acho que você conseguirá construir um grande produto para uma pessoa que não existe.</p>

<h3>Personas não são reais</h3>


<p>Personas não falam. Personas não respondem suas perguntas. Personas não tem opiniões. Personas não pode lhe dizer se uma coisa não está legal. Personas não conseguem dizer quando uma frase não faz sentido. Personas não se sentem frustradas. Personas não sofrem pressão. Personas não podem clicar nas coisas. Personas não cometem erros. Personas não pode fazer julgamentos. Personas não usam produtos. Personas não são reais.</p>

<h3>Pessoas são reais</h3>


<p>Pessoas falam. Pessoas respondem à perguntas. Pessoas têm opiniões. Pessoas podem lhe avisar se alguma coisa está errada. Pessoas podem lhe dizer quando uma frase não faz sentido. Pessoas se frustram. Pessoas são pressionadas. Pessoas clicam em coisas. Pessoas cometem erros. Pessoas fazem julgamentos. As pessoas usam produtos. Pessoas são reais.</p>

<h3>Caia na Real</h3>


<p>Portanto, se você não consegue conceber algo para si próprio, crie algo para alguém que você conheça. Envolva a pessoa ou as pessoas em seu projeto desde o início. Basear suas decisões em traços de personalidade não é o que eu recomendaria se você realmente deseja construir um ótimo produto.</p>

<h3>O que eu acho</h3>


<p>Eu sempre acompanho de perto o que o pessoal da <strong>37signals</strong> está fazendo. Na verdade eu admiro muito o trabalho deles, porque são uma empresa pequena que conseguiu criar alguns produtos excelentes e estão fazendo o um nome. Eu gosto de pensar que posso fazer o mesmo se quiser. Eles cairam na real, entenderam que são pequenos e que devem agir como tal. De que iria adiantar se o <strong>Basecamp</strong> fosse um concorrente do <strong>Microsoft Project</strong>? Iria ser apenas mais um software genérico.</p>

<p>Mas eles fizeram algo diferente, criaram um software baseando-se nas necessidades deles, com as funcionalidades que ELES precisavam e perceberam que muita gente também tem os mesmos problemas.</p>

<p>Quer criar um produto? Crie algo para você. Eu já comecei, <a href="http://www.carreirati.com/">clique aqui</a>.</p>

<p>E aguardem, tem novidade vindo aí.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/07/dica-rapida-duas-listas-interessantes/">Dica rápida: Duas listas interessantes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-07T00:00:00-02:00" pubdate data-updated="true"> 7 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/155884100_053e873db1.jpg" alt="155884100_053e873db1.jpg" /></p>

<p>Uma lista com <a href="http://www.zanypixel.com/blog/ruby-web-apps/">101 projetos criados em Ruby on Rails</a>. Vale a penas dar uma olhada.</p>

<p>E como a moda agora é comprar um Mac, um <a href="http://chris.pirillo.com/2007/11/06/top-100-mac-apps/">top 100 aplicativos para Mac</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/06/radrails-091/">RadRails 0.9.1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-06T00:00:00-02:00" pubdate data-updated="true"> 6 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/116415814_09936f50b6.jpg" alt="116415814_09936f50b6.jpg" /></p>

<p>A equipe de desenvolvimento do <strong>RadRaild</strong> acaba de <a href="http://www.aptana.com/blog/?p=199">anunciar</a> o lançamento da versão 0.9.1.</p>

<p>As principais novidades são uma melhor integração com o <strong>JRuby</strong> e uma instalação mais simples. Agora o RadRails verifica se você já possui o <strong>Ruby</strong> instalado na máquina e se for o caso, ele mesmo se encarrega de fazer isto. Ele também age da mesma maneira com o <strong>Mongrel</strong> e alguns <strong>gems</strong> como o <strong>ruby-debug-ide</strong>.</p>

<p>Você pode fazer o download da <a href="http://www.aptana.com/download/">versão gratuita aqui</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/06/deixando-meus-metodos-de-pesquisa-mais-espertos/">Deixando meus métodos de pesquisa mais espertos</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-06T00:00:00-02:00" pubdate data-updated="true"> 6 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/1858685882_35f2f01bca.jpg" alt="1858685882_35f2f01bca.jpg" /></p>

<p>Imagine o seguinte método:</p>

<pre>
def count_users(type)
  User.count(:all, :conditions =&gt; ["type = ?", type])
end</pre>


<p>&Eacute; um método simples, que irá me retornar a quantidade de usuários de um determinado tipo. Agora, vamos testar nosso método (preste atenção aos comandos <strong>SQL</strong> gerados):</p>

<pre>
&gt;&gt; count_users(1)
=&gt; 2
SELECT count(*) AS count_all FROM users WHERE (type = 1)

&gt;&gt; count_users(2)
=&gt; 5
SELECT count(*) AS count_all FROM users WHERE (type = 2)</pre>


<p>Ok, até aqui tudo funciona perfeitamente, mas e se eu desejasse contar todos os usuários que tivessem a coluna <strong>type</strong> com o valor <strong>NULL</strong>?</p>

<pre>
&gt;&gt; count_users(nil)
=&gt; 0
SELECT count(*) AS count_all FROM users WHERE (type = NULL)</pre>


<p>Opa, eu tenho um registro no meu banco com o valor <strong>NULL</strong>, mas o meu método retornou zero. O que saiu errado? Note a <strong>query</strong> gerado pelo comando, <strong>type = NULL </strong>está errado, deveríamos usar <strong>type IS NULL</strong>.</p>

<p>Preciso alterar meu método:</p>

<pre>
def count_users(type)
  User.count(:all, :conditions =&gt; {:type =&gt; type})
end</pre>


<p>Note que alterei a forma como o par&acirc;metro <strong>:conditions</strong> estava sendo usado. Neste caso especifico, meu método ficou muito mais robusto. Veja alguns exemplos:</p>

<pre>
&gt;&gt; count_users(1)
=&gt; 2
SELECT count(*) AS count_all FROM users WHERE (users."type" = 1)

&gt;&gt; count_users(2)
=&gt; 5
SELECT count(*) AS count_all FROM users WHERE (users."type" = 2)

&gt;&gt; count_users(nil)
=&gt; 1
SELECT count(*) AS count_all FROM users WHERE (users."type" IS NULL)

&gt;&gt; count_users([1,3])
=&gt; 3
SELECT count(*) AS count_all FROM users WHERE (users."type" IN (1,3))

&gt;&gt; count_users(1..3)
=&gt; 8
SELECT count(*) AS count_all FROM users WHERE (users."type" BETWEEN 1 AND 3)</pre>


<p>Note que agora, mesmo passando <strong>nil</strong> ou um <strong>array</strong> para o método, ele criará a <strong>query</strong> de pesquisa da forma correta de acordo com o tipo do objeto usado.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/05/precisando-de-ajuda/">Como era mesmo?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-05T00:00:00-02:00" pubdate data-updated="true"> 5 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/1858060065_1ec99b56ca.jpg" alt="1858060065_1ec99b56ca.jpg" /></p>

<p>Não tem jeito, ou você programa com um livro do seu lado ou com algum site como o <a href="http://api.rubyonrails.com/">Rails Framework Documentation</a> aberto o tempo todo.</p>

<p>Já existe algumas ferramentas como o NetBeans que fornecem uma espécie de <a href="http://en.wikipedia.org/wiki/Autocompletion">code completion</a> para Ruby e Rails.  Mas para quem usa o TextMate como eu, é normal vez por outra se esquecer da sintaxe de algo ou quais parametros podem ser usados em um determinado método e em que ordem.</p>

<p>Programadores Web sofrem muito mais com esse problema do que os outros. Além do Ruby e do Rails, você ainda usa JavaScript, HTML, CSS e mais algumas coisinhas&#8230;</p>

<p>Conversando com alguns amigos, fui descobrindo que cada um tem o seu jeitinho para remediar este problema. Eu mesmo tenho comigo uma pasta cheia de cheat sheets que fui montando com o tempo. E quando eu falo pasta não estou me referindo a uma pasta no computador (diretório), e sim a uma pasta preta com plásticos cheia de papeis impressos com os cheats. Alguns deles eu fui pegando pela internet, outros eu mesmo montei. No meu caso é muito mais prático assim.</p>

<p>Outra coisa que tem me ajudado bastante são sites como o <a href="http://www.noobkit.com/">Noobkit Docs</a>. O Noobkit é só mais um site com a API do Ruby e do Rails, mas ele tem um recurso que me ajuda bastante na hora do aperto. Ele possui um <a href="http://www.noobkit.com/search/tools">plugin de pesquisa</a> para os principais navegadores, que torna muito mais rápido procurar por algum método especifico.</p>

<p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/firefox-search.png" alt="firefox-search.png" /></p>

<p>Outros sites que posso recomendar são:</p>

<ul>
    <li><a href="http://www.railsbrain.com/">RailsBrain</a>: Descobri este a pouco tempo. &Eacute; bem completo e parece que tenta se manter o mais atualizado possível com as novas versões do Rails.</li>
    <li><a href="http://www.railsapi.org/">Ruby on Rails API</a>: Gosto do jeitão deste site.</li>
    <li><a href="http://www.gotapi.com/html">gotAPI</a>: Este não é só sobre RoR, aqui você vai encontrar um pouco de tudo, HTML, CSS e até Oracle e MySQL.</li>
</ul>


<p>&Eacute; assim que me viro na hora do esquecimento ou na falta de conhecimento mesmo. E você como faz na hora do aperto?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/05/mac-no-pc/">Mac no PC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-05T00:00:00-02:00" pubdate data-updated="true"> 5 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/2558193-6c3_display.jpg" alt="2558193-6c3_display.jpg" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/03/quem-usa-radrails-deve-ler-o-blog-do-dr-nick/">Quem usa RadRails deve ler o blog do Dr. Nic</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-03T00:00:00-02:00" pubdate data-updated="true"> 3 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/130749539_89959dd059.jpg" alt="130749539_89959dd059.jpg" /></p>

<p>Existe uma coisa que não se discute na comunidade Rails, a IDE que cada um usa para desenvolver. Quem tem o seu <strong>Mac</strong>, na maior parte dos casos é un&acirc;nime quanto ao famoso <strong>TextMate</strong>. Mas aqueles que ainda estão no Windows (blah) ou no Linux, a discussão é bem acirrada quanto à que IDE usar.</p>

<p>Tem muita gente usando o <strong>NetBeans</strong>, outros usam o <strong>Vim</strong>, <strong>Gedit</strong> e por aí vai. Antes de conhecer o TextMate eu experimentei cada um deles e o que usei por mais tempo foi o <strong>RadRails</strong> (ou Aptana+RadRails). No Windows ele é mais rápido que o NetBeans e o Aptana tem algumas coisas bem legais para quem está mechendo com HTML.</p>

<p>Parece que o <a href="http://drnicwilliams.com/category/radrails/">Dr. Nic</a> também gosta bastante do RadRails. De vez em quando ele dá algumas dicas bem legais para quem usa esta ferramenta. A sua última dica foi <a href="http://radrailstemplates.com/">este site</a>, com templates para o RadRails.</p>

<p>Quem usa o RadRails com certeza vai gostar das dicas do <a href="http://drnicwilliams.com/">Dr. Nic</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2007/11/02/333/">Magica no Ruby com blocos e símbolos</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-11-02T00:00:00-02:00" pubdate data-updated="true"> 2 de Novembro de 2007</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><center><img src="http://old.nomedojogo.com/wp-content/uploads/2007/11/392125498_7752990e1e.jpg" alt="392125498_7752990e1e.jpg" /></center></p>




<p>Sem dúvida nenhuma o Ruby tem algumas mágicas que impressionam. Imagine por exemplo que eu queira pegar um <strong>array</strong> de <strong>strings</strong> e converter todas as palavras para maiúsculo, eu poderia fazer assim:</p>




<pre>
>> meu_array = %w(ruby on rails)
=> ["ruby", "on", "rails"]

>> meu_array = meu_array.map {|name| name.upcase}
=> ["RUBY", "ON", "RAILS"]
</pre>


<p>Bem simples. Para cada item do array eu executo o método upcase e armazeno o resultado na variável <strong>meu_array</strong>. Mas eu também poderia fazer assim:</p>

<pre>
>> meu_array = %w(ruby on rails)
=> ["ruby", "on", "rails"]

>> meu_array = meu_array.map(&:upcase)
=> ["RUBY", "ON", "RAILS"]
</pre>


<p>Acho que ficou ainda mais bonito: aplique o método upcase para cada elemento de <strong>meu_array</strong>. O que acha?</p>

<p>Como isto funciona?</p>

<p>Quando usamos o operador <strong>&amp;</strong> na frente do nome de uma variável estamos dizendo que esta variável é um bloco. Mas no nosso caso <strong>:upcase</strong> não é um bloco e sim um símbolo. Neste caso o Ruby tenta converter nosso símbolo em um bloco chamando o método <strong>to_proc</strong> da classe <strong>Symbol</strong>. Mas veja o código do <a href="http://api.rubyonrails.org/classes/Symbol.html">método</a> <strong>to_proc</strong>:</p>

<pre>
def to_proc
  Proc.new { |*args| args.shift.__send__(self, *args) }
end
</pre>


<p>Já entendeu? Este método transforma o símbolo <strong>:upcase</strong> em um bloco, fazendo com que o exemplo acima na verdade seja executado desta maneira:</p>

<pre>
>> meu_array = meu_array.map {|*args| args.shift.__send__(:upcase, *args)}
=> ["RUBY", "ON", "RAILS"]
</pre>


<p>Mágica? Você ainda não viu nada.</p>

<p>Agora imagine que eu tenha um classe <strong>User</strong> no Rails. Usando este recurso eu poderia fazer algo assim:</p>

<pre>
user = User.find(:all)

>> user.all?(&:valid?)
=> true

>> user.any?(&:valid?)
=> true

>> user.each(&:save!)
</pre>


<p>O <strong>Ruby</strong> tem as suas mágicas e o <strong>Rails</strong> sabe usa-las muito bem.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/65/">&larr; Antigos</a>
    
    <a href="/blog/archives">Arquivo</a>
    
    <a class="next" href="/page/63/">Novos &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Artigos Recentes</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/11/07/ruby-em-todos-os-lugares-e-dispositivos/">Ruby em todos os lugares e dispositivos</a>
      </li>
    
      <li class="post">
        <a href="/2011/10/18/grok-podcast-extra-o-que-voce-achou/">Grok Podcast Extra - O que você achou?</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/12/contratos-onde-todos-ganham/">Contratos onde todos ganham</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/25/como-convencer-sua-equipe-a-usar-um-sistema-de-controle-de-vers-o/">Como convencer sua equipe a usar um sistema de controle de versão</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/19/blogando-como-um-hacker/">Blogando como um hacker</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Open Source</h1>
  <ul id="gh_repos">
    <li class="loading">Atualizando&#8230;</li>
  </ul>
  
  <a href="https://github.com/carlosbrando">@carlosbrando</a> no Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'carlosbrando',
            count: 4,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Últimos Tweets</h1>
  <ul id="tweets">
    <li class="loading">Atualizando&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("carlosbrando", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/carlosbrando" class="twitter-follow-button" data-show-count="false">Siga @carlosbrando</a>
  
</section>


<section>
  <h1>Bookmarks</h1>
  <div id="delicious"></div>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/json/cbrando?count=3&amp;sort=date&amp;callback=renderDeliciousLinks"></script>
  <p><a href="http://delicious.com/cbrando">Meus Bookmarks &raquo;</a></p>
</section>


<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/109235566448786781079?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - Carlos Brando -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'carlosbrando';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
